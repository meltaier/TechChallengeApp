# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master

pool:
  vmImage: ubuntu-latest


steps:
- task: AzureCLI@2
  displayName: 'Deploy'
  inputs:
    azureSubscription: 'Azuresub'
    scriptType: 'bash'
    scriptLocation: 'inlineScript'
    inlineScript: |
      #!/bin/bash
      az login --service-principal --username 4c313cd7-b686-4c21-bae4-11c8e0dc2c6d --password Hy0hFldlWW_1teq0B3iNeVgLhq3cnIINKU --tenant 1df8fc01-cd21-47a3-9c05-066d7405ea78
      az deployment group create --resource-group insertresourcegroup --template-file containerinstance.bicep
    addSpnToEnvironment: true

    